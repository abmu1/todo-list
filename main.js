(()=>{"use strict";const e=(e=[])=>{let t;return{todos:e,currentTodo:t,addTodo:t=>{e.push(t)},removeTodo:t=>{for(let n=0;n<e.length;n++)e[n].name===t&&e.splice(n,1)},updateCT:e=>{t=e},index:()=>e.length}},t=(e,t=[])=>({name:e,tasks:t,addTask:e=>{t.push(e)},removeTask:e=>{for(let n=0;n<t.length;n++)t[n].name===e&&t.splice(n,1)},index:()=>t.length}),n=(e,t,n,o=!1)=>{let d="";return{name:e,dueDate:t,isDone:o,priority:n,description:d,updateDone:e=>{o=e},addDescription:e=>{d=e}}};function o(e){localStorage.setItem("library",JSON.stringify(e))}function d(e){let t=e.currentTodo,n=document.getElementById("current-project");n.innerText="";const d=document.getElementById("tasks");d.innerHTML="",t&&(n.innerText=t.name,t.tasks.forEach((t=>{const n=document.createElement("li"),s=document.createElement("button"),a=document.createElement("p"),c=document.createElement("p"),r=document.createElement("button");n.classList.add("task",t.priority),s.classList.add("done"),a.classList.add("task-name"),c.classList.add("date"),r.classList.add("remove","remove-task"),r.innerHTML="&times",r.addEventListener("click",function(e){return function(t){let n=e.currentTodo;const d=t.target.parentElement;n.removeTask(d.dataset.name),d.remove(),o(e)}}(e)),a.textContent=t.name,c.textContent=t.dueDate,s.addEventListener("click",(()=>{if(t.isDone)return t.isDone=!1,n.classList.remove("completed"),void o(e);t.isDone=!0,n.classList.add("completed"),o(e)})),t.isDone&&n.classList.add("completed"),n.append(s,a,c,r),n.dataset.name=t.name,d.append(n)})))}function s(e,t){const n=document.getElementById("projects"),s=document.createElement("li"),a=document.createElement("p"),c=document.createElement("button");s.classList.add("project"),s.dataset.name=t.name,s.addEventListener("click",(()=>{e.currentTodo=t,d(e);const n=document.querySelector(".clicked");n?.classList.remove("clicked"),s.classList.add("clicked")})),a.classList.add("project-name"),a.textContent=t.name,c.classList.add("remove","remove-project"),c.innerHTML="&times",c.addEventListener("click",function(e,t){return function(n){n.stopPropagation();const s=n.target.parentElement,a=s.dataset.name;e.removeTodo(a),s.remove(),e.currentTodo===t&&(e.currentTodo=e.todos[0],d(e)),o(e)}}(e,t)),s.append(a,c),n.append(s)}const a=e(),c=t("Default");a.addTodo(c),a.currentTodo=c;const r=function(){let o=JSON.parse(localStorage.getItem("library"));if(o){const d=o.todos.map((e=>{let o=e.tasks.map((e=>{let{name:t,dueDate:o,priority:d,isDone:s}=e;return n(t,o,d,s)}));return t(e.name,o)}));return e(d)}}()||a;document.getElementById("add-project").addEventListener("click",(e=>{e.stopPropagation();const t=document.getElementById("project-popup");t.classList.add("project-popup"),t.classList.remove("hidden"),document.getElementById("project-title").focus()})),document.getElementById("cancelP").addEventListener("click",(()=>{const e=document.getElementById("project-popup");e.classList.remove("project-popup"),e.classList.add("hidden")})),function(e,t){const n=document.getElementById("project-popup");n.addEventListener("submit",(a=>{a.preventDefault();const c=document.getElementById("project-title"),r=c.value;let i=r.toLowerCase().trim();for(let t=0;t<e.todos.length;t++)if(i===e.todos[t].name.toLowerCase())return c.setCustomValidity("There is already a project with this name!"),c.reportValidity(),void c.setCustomValidity("");const l=t(r);e.addTodo(l),s(e,l),1===e.todos.length&&(e.currentTodo=l,d(e)),c.value="",n.reset(),document.getElementById("cancelP").click(),o(e)}))}(r,t),document.getElementById("add-task").addEventListener("click",(e=>{e.stopPropagation();const t=document.getElementById("task-popup");t.classList.add("task-popup"),t.classList.remove("hidden"),document.getElementById("task-name").focus()})),document.getElementById("cancelT").addEventListener("click",(()=>{const e=document.getElementById("task-popup");e.classList.remove("task-popup"),e.classList.add("hidden")})),function(e,t){const n=document.getElementById("task-popup");n.addEventListener("submit",(s=>{s.preventDefault();const a=document.getElementById("task-name");let c=a.value.toLowerCase().trim();for(let t=0;t<e.currentTodo.tasks.length;t++)if(c===e.currentTodo.tasks[t].name.toLowerCase())return a.setCustomValidity("There is already a task with this name!"),a.reportValidity(),void a.setCustomValidity("");const r=document.getElementById("due-date"),i=document.getElementById("priority"),l=t(a.value.trim(),r.value,i.value);a.value="",r.value="",e.currentTodo.addTask(l),d(e),n.reset(),document.getElementById("cancelT").click(),o(e)}))}(r,n),r.todos.forEach((e=>{s(r,e)})),r.currentTodo=r.todos[0],document.getElementById("projects").firstChild?.click(),document.addEventListener("click",(e=>{const t=document.getElementById("task-popup"),n=document.getElementById("project-popup");t.contains(e.target)||t.classList.contains("hidden")||t.classList.add("hidden"),n.contains(e.target)||n.classList.add("hidden")}))})();
//# sourceMappingURL=main.js.map